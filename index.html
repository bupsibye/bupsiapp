<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
  <title>Knox Market</title>
  <link rel="stylesheet" href="style.css">
  
  <!-- Telegram WebApp SDK -->
  <script src="https://telegram.org/js/telegram-web-app.js"></script>

  <!-- –ü—Ä–æ–≤–µ—Ä–∫–∞: –∑–∞–ø—É—â–µ–Ω–æ –ª–∏ –≤ Telegram -->
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      if (!window.Telegram || !window.Telegram.WebApp) {
        document.body.innerHTML = `
          <div style="text-align: center; padding: 40px; font-family: sans-serif; color: #ffffff; background: #1c1e22; height: 100vh; display: flex; flex-direction: column; justify-content: center; align-items: center;">
            <h2>‚ö†Ô∏è –û—à–∏–±–∫–∞ –∑–∞–ø—É—Å–∫–∞</h2>
            <p style="max-width: 300px; line-height: 1.6;">
              <strong>Mini App –Ω—É–∂–Ω–æ –æ—Ç–∫—Ä—ã–≤–∞—Ç—å —á–µ—Ä–µ–∑ –±–æ—Ç–∞</strong><br>
              <span style="font-size: 14px; color: #aaa;">@knoxway_bot</span>
            </p>
            <p style="font-size: 12px; color: #777; margin-top: 20px;">
              –ù–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ –∏ –Ω–µ –ø–æ –ø—Ä—è–º–æ–π —Å—Å—ã–ª–∫–µ
            </p>
          </div>
        `;
        throw new Error("Telegram WebApp not available");
      }
    });
  </script>
</head>
<body>
  <!-- –í–µ—Ä—Ö–Ω—è—è –ø–∞–Ω–µ–ª—å -->
  <header class="app-header">
    <button id="tab-shop" class="tab-btn active">
      <span>–ú–∞–≥–∞–∑–∏–Ω</span>
    </button>
    <button id="tab-exchange" class="tab-btn">
      <span>–û–±–º–µ–Ω</span>
    </button>
    <button id="tab-inventory" class="tab-btn">
      <span>–ü—Ä–æ—Ñ–∏–ª—å</span>
    </button>
    <button id="buy-stars-top" class="tab-btn">
      <span>–ö—É–ø–∏—Ç—å ‚≠ê</span>
    </button>
    <div class="stars-balance">
      <span id="stars-count">‚Äî</span> ‚≠ê
    </div>
  </header>

  <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç -->
  <main class="main-content">
    <!-- –ú–∞–≥–∞–∑–∏–Ω -->
    <div id="shop" class="tab-content active">
      <h2>üõçÔ∏è –ú–∞–≥–∞–∑–∏–Ω –ø–æ–¥–∞—Ä–∫–æ–≤</h2>
      <div class="shop-grid">
        <div class="shop-item">
          <img src="https://via.placeholder.com/60/FFD700" alt="–ü–ª—é—à–µ–≤—ã–π –∫–æ—Ç">
          <h3>–ü–ª—é—à–µ–≤—ã–π –∫–æ—Ç</h3>
          <p>50 ‚≠ê</p>
          <button class="shop-item-btn" data-name="–ü–ª—é—à–µ–≤—ã–π –∫–æ—Ç" data-price="50">–ö—É–ø–∏—Ç—å</button>
        </div>
        <div class="shop-item">
          <img src="https://via.placeholder.com/60/FF69B4" alt="–ó–æ–ª–æ—Ç–∞—è –∑–≤–µ–∑–¥–∞">
          <h3>–ó–æ–ª–æ—Ç–∞—è –∑–≤–µ–∑–¥–∞</h3>
          <p>30 ‚≠ê</p>
          <button class="shop-item-btn" data-name="–ó–æ–ª–æ—Ç–∞—è –∑–≤–µ–∑–¥–∞" data-price="30">–ö—É–ø–∏—Ç—å</button>
        </div>
      </div>
    </div>

    <!-- –û–±–º–µ–Ω -->
    <div id="exchange" class="tab-content">
      <h2>üîÑ –ù–∞—á–∞—Ç—å –æ–±–º–µ–Ω</h2>
      <button id="start-exchange-by-username" class="btn">–ù–∞—á–∞—Ç—å –æ–±–º–µ–Ω –ø–æ username</button>
      <div id="exchange-area" style="margin-top: 16px;"></div>
    </div>

    <!-- –ü—Ä–æ—Ñ–∏–ª—å -->
    <div id="inventory" class="tab-content">
      <h2>üë§ –í–∞—à –ø—Ä–æ—Ñ–∏–ª—å</h2>

      <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ -->
      <div class="user-info-card">
        <img id="user-avatar" src="https://via.placeholder.com/60/cccccc/999999?text=?" alt="Avatar" class="user-avatar">
        <div class="user-details">
          <p><strong>ID:</strong> <span id="user-id">‚Äî</span></p>
          <p><strong>Username:</strong> <span id="user-username">‚Äî</span></p>
        </div>
      </div>

      <!-- –í–∫–ª–∞–¥–∫–∏: –ò–Ω–≤–µ–Ω—Ç–∞—Ä—å / –ò—Å—Ç–æ—Ä–∏—è -->
      <div class="tabs-secondary">
        <button class="tab-active" data-tab="inventory-items">–ò–Ω–≤–µ–Ω—Ç–∞—Ä—å</button>
        <button data-tab="history">–ò—Å—Ç–æ—Ä–∏—è</button>
      </div>

      <!-- –°–æ–¥–µ—Ä–∂–∏–º–æ–µ –≤–∫–ª–∞–¥–æ–∫ -->
      <div id="inventory-items" class="tab-pane active">
        <div id="user-gifts-grid" class="gifts-grid">
          <!-- –ó–¥–µ—Å—å –±—É–¥—É—Ç –ø–æ–¥–∞—Ä–∫–∏ -->
        </div>
        <button id="withdraw-gift-btn" class="btn">–í—ã–≤–µ—Å—Ç–∏ –ø–æ–¥–∞—Ä–æ–∫</button>
      </div>

      <div id="history" class="tab-pane">
        <h3>üìú –ò—Å—Ç–æ—Ä–∏—è –¥–µ–π—Å—Ç–≤–∏–π</h3>
        <div id="history-list">
          <!-- –ó–¥–µ—Å—å –±—É–¥–µ—Ç –∏—Å—Ç–æ—Ä–∏—è -->
        </div>
      </div>
    </div>
  </main>

  <!-- –°–∫—Ä–∏–ø—Ç—ã -->
  <script src="script.js" defer></script>
</body>
</html>
