<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
  <title>Bupsi</title>
  <link rel="stylesheet" href="style.css">
  <script src="https://telegram.org/js/telegram-web-app.js"></script>

  <!-- –ü—Ä–æ–≤–µ—Ä–∫–∞ WebApp SDK -->
  <script>
    if (!window.Telegram || !window.Telegram.WebApp) {
      document.body.innerHTML = `
        <div style="text-align: center; padding: 40px; font-family: sans-serif;">
          <h2>‚ö†Ô∏è –û—à–∏–±–∫–∞</h2>
          <p>–û—Ç–∫—Ä–æ–π—Ç–µ Mini App —á–µ—Ä–µ–∑ –±–æ—Ç–∞ <strong>@bupsibot</strong></p>
          <p><small>–ù–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ –∏ –Ω–µ –ø–æ –ø—Ä—è–º–æ–π —Å—Å—ã–ª–∫–µ!</small></p>
        </div>
      `;
      throw new Error("Telegram WebApp not available");
    }
  </script>
</head>
<body>
  <header class="app-header">
    <button id="tab-shop" class="tab-btn active">
      <span>–ú–∞–≥–∞–∑–∏–Ω</span>
    </button>
    <button id="tab-exchange" class="tab-btn">
      <span>–û–±–º–µ–Ω</span>
    </button>
    <button id="tab-inventory" class="tab-btn">
      <span>–ü—Ä–æ—Ñ–∏–ª—å</span>
    </button>
    <button id="buy-stars-top" class="tab-btn">
      <span>–ö—É–ø–∏—Ç—å ‚≠ê</span>
    </button>
    <div class="stars-balance">
      <span id="stars-count">‚Äî</span> ‚≠ê
    </div>
  </header>

  <main class="main-content">
    <div id="shop" class="tab-content active">
      <h2>üõçÔ∏è –ú–∞–≥–∞–∑–∏–Ω –ø–æ–¥–∞—Ä–∫–æ–≤</h2>
      <div class="shop-grid">
        <div class="shop-item">
          <img src="https://via.placeholder.com/60/FFD700" alt="Cat">
          <h3>–ü–ª—é—à–µ–≤—ã–π –∫–æ—Ç</h3>
          <p>50 ‚≠ê</p>
          <button class="shop-item-btn" data-name="–ü–ª—é—à–µ–≤—ã–π –∫–æ—Ç" data-price="50">–ö—É–ø–∏—Ç—å</button>
        </div>
      </div>
    </div>

    <div id="exchange" class="tab-content">
      <h2>üîÑ –ù–∞—á–∞—Ç—å –æ–±–º–µ–Ω</h2>
      <button id="start-exchange-by-username" class="btn">–ù–∞—á–∞—Ç—å –æ–±–º–µ–Ω –ø–æ username</button>
      <div id="exchange-area"></div>
    </div>

    <div id="inventory" class="tab-content">
      <h2>üë§ –ü—Ä–æ—Ñ–∏–ª—å</h2>
      <div class="user-info-card">
        <img id="user-avatar" src="https://via.placeholder.com/60" alt="Avatar">
        <div class="user-details">
          <p><strong>ID:</strong> <span id="user-id">‚Äî</span></p>
          <p><strong>Username:</strong> <span id="user-username">‚Äî</span></p>
        </div>
      </div>
      <div class="tabs-secondary">
        <button class="tab-active" data-tab="inventory-items">–ò–Ω–≤–µ–Ω—Ç–∞—Ä—å</button>
        <button data-tab="history">–ò—Å—Ç–æ—Ä–∏—è</button>
      </div>
      <div id="inventory-items" class="tab-pane active">
        <div id="user-gifts-grid" class="gifts-grid"></div>
        <button id="withdraw-gift-btn" class="btn">–í—ã–≤–µ—Å—Ç–∏ –ø–æ–¥–∞—Ä–æ–∫</button>
      </div>
      <div id="history" class="tab-pane">
        <h3>üìú –ò—Å—Ç–æ—Ä–∏—è –¥–µ–π—Å—Ç–≤–∏–π</h3>
        <div id="history-list"></div>
      </div>
    </div>
  </main>

  <script src="script.js" defer></script>
</body>
</html>
